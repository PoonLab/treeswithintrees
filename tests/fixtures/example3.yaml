# draft proposal for specification of within-host coalescent process
CompartmentTypes:
  'blood':                                        # assume only one blood (plasma) compartment 
    unsampled: 20
    susceptible: 50                               # blood no transmission to blood - transmission is to uninfected cell
    branching.rates: (blood=0.0, cell=0.05)       # infection of a cell (transmission rate from blood -> cell)
    migration.rates: (blood=0.0, cell=0.0)        
    bottleneck.size: 1                            # assume a single virus enters an uninfected cell
    popn.growth.dynamics:                         # no replication in blood 
      piece1:
        - start: 0
        - end: inf
        - intercept: 1                            # at t=0, popn starts at the bottleneck size
        - slope: 0
  'cell':
    unsampled: 5
    susceptible: 30                               
    branching.rates: (blood=0.0, cell=0.0)        # assume no direct cell-to-cell transmission
    migration.rates: (blood=0.01, cell=0.0)       # migration rate from cell -> blood is release of virus particles back into blood
    bottleneck.size: undefined                    # assume no migration to infected cells
    popn.growth.dynamics:                         # extinction of lineages cannot be sampled, is expressed by coalescent rate
      piece1:
        - start: 0
        - end: 0.75
        - intercept: 1                            # at t=0, popn starts at the bottleneck size
        - slope: 15
      piece2:
        - start: 0.75
        - end: 1.5
        - intercept: -15
        - slope: 41
      piece3:
        - start: 1.5
        - end: 2.25
        - intercept: 90
        - slope: -30
      piece4:
        - start: 2.25
        - end: inf
        - intercept: 30
        - slope: -2
Compartments:
  'blood':
    type: blood                                   # reference to CompartmentType object
    replicates: 1
  'cell':
    type: cell
    replicates: 100                               # sampled, not total!
Lineages:
  'blood':
    sampling.time: 0
    location: blood
    replicates: 100
  'cell':
    sampling.time: 0
    location: cell
    replicates: 1                                 # if location has replicates, then this is applied to each Compartment replicate

